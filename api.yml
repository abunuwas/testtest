swagger: "2.0"
info:
  title: Riser API specification
  version: v1
host: members.riser.work

consumes:
  - application/json
produces:
  - application/json

paths:
  /:
    get:
      summary: Dashboard with summery of user activity
      responses:
        "200":
          description: An object with summery of recent user activity
          headers:
          schema:
            $ref: '#/definitions/Activity'

        default:
          description: unexpected Error
          schema:
            $ref: '#/definitions/Error'

  /placements:
    get:
      summary: View to handle placements.
      headers:
      responses:
        "200":
          schema:
            type: array
            items:
              $ref: '#/definitions/Placement'
    post:
      summary: Creates a new placement resource.
      headers:
      requestBody:
        content:
          schema:
            $ref: '#/definitions/Placement'
      responses:
        "201":
          schema:
            $ref: '#/definitions/Placement'

  /placement/{placement_id}:
    get:
      summary: Returns the view of one placement.
      responses:
        "200":
        "403":
          description: Returned when user tries to access a placement not their own.
    put:
      summary: Updates a specific placement.
      headers:
      requestBody:
        content:
          schema:
            $ref: '#/definitions/Placement'
      responses:
        "200":
          schema:
            $ref: '#/definitions/Placement'
    delete:
      summary: Deletes a specific placement.
      headers:
      reponses:
        "200":

  /recruiting:

  /payments:
  /payment/{payment_id}:

  /invoincing:
  /invoince/{invoice_id}:

  /timesheets:
  /timesheet/{timesheet_id}:

  /boolean:

  /companies_client:
  /company_client/{company_id}:

  /candidates:
  /candidate/{candidate_id}:

definitions:
  Activity: # WTF is this??

  Error:
    required:
      - code
      - message

    properties:
      code:
        type: integer
      message:
        type: string

  Placement:
    required:
      - submitted
      - status
      - reference
      - company
      - candidate
      - start
      - end
    properties:
      submitted:
        type: iso date
      status:
        type: string
        choices: accepted | declined | pending
      reference:
        type: integer
        description: unique
      company:
        type: string
      candidate:
        type: string
        description: first name and last name
      start:
        type: iso date
      end:
        type: iso date
      po_number:
        type: integer
        description: unique

  Invoice:
    required:
      - submitted
      - reference
      - link
      - client
      - candidate
    properties:
      submitted:
        type: iso date
      reference:
        type: integer
        description: unique
      link:
        type: string
        description: url
      client:
        type: string
      candidate:
        type: string
        description: first name and last name

  Payment:
    required:
      - due_from_client
      - due_to_riser
      - due_to_candidate
      - status
      - reference
      - due_date
    properties:
      due_from_client:
        type: float
      due_to_riser:
        type: float
      due_to_candidate:
        type: float
      status:
        type: string
        choices: paid | due | overdue
      reference:
        type: integer
        description: unique
      due_date:
        type: iso date
      payment_proof: # like a document, digital validation code or something, would this be needed?

  Candidate:
    required:
      - first_name
      - last_name
      - email
      - password
    properties:
      first_name:
        type: string
      last_name:
        type: string
      email:
        type: string
        description: valid email
      password:
        type: string
        description: encoded
      birth_date:
        type: iso date
      nationality:
        type: string
      mobile_number:
        type: string
        description: with country code
      home_number:
        type: string
        description: with country code
      address:
        type:
          $ref: '#/definitions/Address'
      job_title:
        type: string
      curiculum_vitae:
        type: string
        description: url
      company_name:
        type: string
      company_type:
        type: string
        choices: LTD | umbrella | self_employed
      company_registration:
        type: string
      company_vat_number:
        type: string
      company_address:
        type:
          $ref: '#/definitions/Address'
      company_telephone_number:
        type: string
        description: including country code
      skills:
        type:
          $ref: '#/definitions/Skill'

  CompanyClient:
    required:
      - name
      - telephone
      - recruiting_manager
    properties:
      name:
        type: string
        description: full registered name of the company.
      telephone:
        type: string
        description: including country code.
      recruiting_manager:
        type:
          $ref: '#/definitions/GenericUser'
      vat_number:
        type: string
      registration_number:
        type: string
      trading_address:
        $ref: '#/definitions/Address'
      registared_address:
        $ref: '#/definitions/Address'
      invoice_address:
        $ref: '#/definitions/Address'
      timesheet_authrizer:
        $ref: '#/definitions/GenericUser'
      invoice_contact: # WTF is this??

  Timesheet:
    type: array
    items:
      $ref: '#/definitions/TimesheetDay'

  TimesheetDay:
    required:
      - date
      - week_day
      - start_time
      - end_time
      - breaks
      - total_hours
    properties:
      date:
        type: iso date
      week_day:
        type: string
        description: day of the week
      start_time:
        type: string
        description: hour and minute when working day started (in UTC converted by client code?). Format: 00:00-23:59.
      end_time:
        type: string
        description: hour and minute when working day ended (in UTC converted by client code?). Format: 00:00-23:59.
      breaks:
        type: string
        description: hours and minutes of break, e.g. for lunch.
      total_hours:
        type: float
        string: total amount of hours worked in the day (calculated by client code).

  Address:
    required:
      - country
      # we may need to refactor the country plus county/state stuff,
      # and allow for different kinds of subdivisions (state, county,
      # autonomous community, etc.) depending on the country, and whether
      # it is truly relevant or not.
      - county_state
      - city
      - post_code
      - address_line
    properties:
      country:
        type: string
      county_state:
        type: string
        description: only when relevant.
      post_code:
        type: string
      address_line:
        type: string
        description: full address of the house, including house number or name, and floor if required by the country.

  GenericUser:
    required:
      - first_name
      - last_name
      - email
    properties:
      first_name:
        type: string
      last_name:
        type: string
      email:
        type: string
      job_title:
        type: string
      contact_number:
        type: string
        description: including country code.
